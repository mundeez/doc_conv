{% extends "md2docx/base.html" %}

{% block title %}Conversion started â€” md2docx{% endblock %}

{% block content %}
  <div class="card stack" style="gap:10px;">
    <div class="flex-between" style="gap:12px;">
      <div>
        <h2 style="margin:0 0 4px;">Conversion started</h2>
        <p class="muted" style="margin:0;">We queued your markdown; check status to download when ready.</p>
      </div>
      <span class="pill">Queued</span>
    </div>

    <p style="margin:0;">Task id: <strong>{{ task_id|default:task }}</strong></p>
    {% if output_format %}
      <p style="margin:0;">Output format: <strong>{{ output_format|upper }}</strong></p>
    {% endif %}

    {% if task_id %}
      <a class="btn btn-primary" style="width:max-content;" href="{% url 'md2docx:status' task_id %}?format=html">View status</a>
      <div class="muted" style="margin-top:10px;">
          <div>Status URL: <code>{% url 'md2docx:status' task_id %}?format=html</code></div>
          <div>Download URL: <code>{% url 'md2docx:download' task_id %}</code></div>
      </div>
    {% elif task %}
      <a class="btn btn-primary" style="width:max-content;" href="{% url 'md2docx:status' task.id %}?format=html">View status</a>
      <div class="muted" style="margin-top:10px;">
          <div>Status URL: <code>{% url 'md2docx:status' task.id %}?format=html</code></div>
          <div>Download URL: <code>{% url 'md2docx:download' task.id %}</code></div>
      </div>
    {% endif %}

    <p class="muted" style="margin:6px 0 0;">Keep these links; status will reach 100% when ready, then download will succeed.</p>
  </div>

{% endblock %}
